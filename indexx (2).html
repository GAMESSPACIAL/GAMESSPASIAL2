<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Video di Tengah ‚Äî Kontrol Kiri ‚Äî Gambar Kanan</title>
<style>
/* ===========================
   RESET + BODY
   =========================== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html,body { height: 100%; }
body{
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  color:#111;
  overflow:hidden;
}

/* ===========================
   LAYOUT KONTAINER UTAMA
   =========================== */
.app {
  width:100vw;
  height:100vh;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* KIRI: PANEL KONTROL */
.controls {
  position: absolute;
  left: 20px;
  top: 20px;
  width: 280px;
  background: rgba(255,255,255,0.96);
  border-radius: 14px;
  padding: 14px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.18);
  z-index: 30;
}
.controls h3 {
  font-size:16px;
  margin-bottom:8px;
  color:#222;
}
.controls .buttons {
  display:flex;
  gap:10px;
  margin-bottom:12px;
}
.btn {
  flex:0 0 auto;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:8px 12px;
  background:#667eea;
  color:#fff;
  border-radius:10px;
  border:0;
  cursor:pointer;
  font-weight:600;
  box-shadow: 0 4px 10px rgba(102,126,234,0.25);
}
.btn.secondary {
  background:#fff;
  color:#333;
  border:1px solid #e6e6e6;
  box-shadow:none;
}
.controls label { font-size:13px; color:#444; margin-bottom:6px; display:block; }
.controls input[type="range"] { width:100%; }

/* TENGAH: KOTAK VIDEO (SQUARE) */
.stage {
  /* center area where video sits */
  position: relative;
  width: min(64vmin, 580px); /* responsive square - max 580px */
  height: min(64vmin, 580px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 10;
}

/* Frame square dengan rounded corners */
.video-wrap {
  width:100%;
  height:60%;
  border-radius:28px;         /* lengkung penuh */
  overflow:hidden;            /* agar video ikut lengkung */
  box-shadow:
    0 12px 36px rgba(0,0,0,0.35),
    inset 0 1px 0 rgba(255,255,255,0.06);
  background: #000;
  position: relative;
}

/* Video element juga dibulatkan agar pinggirnya rapi */
#spinVideo {
  width:100%;
  height:100%;
  object-fit:cover;           /* isi penuh, tanpa mengubah aspek */
  display:block;
  border-radius:28px;         /* agar pinggir video ikut curve */
  pointer-events: none;       /* klik pada video tidak berefek (hanya tombol kiri yg mengontrol) */
}

/* overlay tipis (mis. shimmer/gradient) */
.video-overlay {
  position:absolute;
  inset:0;
  pointer-events:none;
  background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.18) 60%, rgba(0,0,0,0.36) 100%);
}

/* KANAN: FRAME MINI (sisi dadu) */
.reference-mini {
  position: absolute;
  right: 20px;
  top: 20px;
  width: 325px;
  background: rgba(255,255,255,0.98);
  padding: 12px;
  border-radius: 12px;
  box-shadow: 0 8px 28px rgba(0,0,0,0.18);
  z-index: 30;
}
.reference-mini h4 {
  font-size:13px;
  margin-bottom:8px;
  text-align:center;
  color:#222;
  border-bottom:1px solid #e9e9e9;
  padding-bottom:8px;
}
.mini-item { margin-bottom:12px; text-align:center; }
.mini-item .label { font-size:12px; font-weight:700; color:#333; margin-bottom:6px; }
.mini-item img { width:300px; height:auto; border-radius:8px; border:1px solid #eee; background:#fafafa; }

/* bawah kiri: text kecil */
.brand {
  position:absolute;
  left:20px;
  bottom:20px;
  background: orange;
  color:white;
  padding:10px 16px;
  border-radius:10px;
  font-weight:700;
  z-index:30;
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}

/* responsive tweaks */
@media (max-width:920px){
  .controls { width:190px; left:14px; top:14px; padding:10px; }
  .reference-mini { right:14px; top:14px; width:160px; padding:10px; }
  .mini-item img { width:130px; }
  .stage { width: min(72vmin, 460px); height: min(72vmin, 460px); }
}
@media (max-width:520px){
  .controls { position:fixed; left:10px; top:10px; width:170px; }
  .reference-mini { display:none; } /* sembunyikan kanan di HP supaya muat */
  .stage { width: min(82vmin, 360px); height: min(82vmin, 360px); }
}
</style>
</head>
<body>
  <div class="app">

    <!-- KIRI: Kontrol -->
    <div class="controls" aria-label="Kontrol Video">
      <h3>üéûÔ∏è Kontrol Video</h3>

      <div class="buttons">
        <button class="btn" id="playPauseBtn" title="Play / Pause">‚èØ</button>
        <button class="btn secondary" id="resetBtn" title="Reset ke awal">üîÑ</button>
      </div>

      <div style="margin-top:8px;">
        <label for="speedRange">‚ö° Kecepatan putar: <span id="speedVal">1.0</span>x</label>
        <input id="speedRange" type="range" min="0.25" max="2.5" step="0.05" value="1">
      </div>

      <div style="margin-top:10px; font-size:13px; color:#444;">
        <div>Loop: <strong>ON</strong></div>
        <div style="margin-top:6px; font-size:12px; color:#666;"></div>
      </div>
    </div>

    <!-- TENGAH: Video square -->
    <div class="stage" role="main" aria-label="Area video">
      <div class="video-wrap" aria-hidden="false">
        <!-- video sumbermu -->
        <video id="spinVideo" playsinline muted crossorigin="anonymous">
          <source src="https://i.imgur.com/PS2WScN.mp4" type="video/mp4">
          Browser-mu tidak mendukung video tag.
        </video>

        <!-- overlay (efek gelap) -->
        <div class="video-overlay" aria-hidden="true"></div>
      </div>
    </div>

    <!-- KANAN: mini images -->
    <aside class="reference-mini" aria-label="Referensi sisi dadu">
      <h4>Sisi Dadu</h4>

      <div class="mini-item">
        <div class="label">TAMPAK DEPAN</div>
        <img src="https://i.imgur.com/L3TLhpp.png" alt="tampak depan dadu">
      </div>

      <div class="mini-item">
        <div class="label">TAMPAK BELAKANG</div>
        <img src="https://i.imgur.com/EYEDgU5.png" alt="tampak belakang dadu">
      </div>
    </aside>

    <!-- brand / teks bawah -->
    <div class="brand">KSE UNJA</div>
  </div>

<script>
/*
  Script kontrol video:
  - Play/Pause tombol kiri
  - Reset tombol
  - Slider kecepatan (playbackRate)
  - Cegah klik video mem-pause (pointer-events:none di CSS)
  - Trik seamless-ish: jika mendekati akhir, loncat ke 0.04 untuk meminimalkan gap.
*/

(function(){
  const vid = document.getElementById('spinVideo');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const resetBtn = document.getElementById('resetBtn');
  const speedRange = document.getElementById('speedRange');
  const speedVal = document.getElementById('speedVal');

  // default
  vid.loop = true;            // fallback loop
  vid.muted = true;           // autoplay lebih reliable ketika muted
  vid.playsInline = true;
  vid.preload = "auto";
  vid.playbackRate = parseFloat(speedRange.value);

  let isPlaying = false;

  // Try to autoplay when loaded
  function tryAutoPlay(){
    const p = vid.play().then(()=> {
      isPlaying = true;
      updatePlayBtn();
    }).catch(()=> {
      // autoplay might be blocked; keep paused ‚Äî user can press play
      isPlaying = false;
      updatePlayBtn();
    });
  }

  // Update play/pause button appearance (simple text)
  function updatePlayBtn(){
    playPauseBtn.textContent = isPlaying ? '‚è∏' : '‚ñ∂';
  }

  // Toggle play/pause
  playPauseBtn.addEventListener('click', function(){
    if (!isPlaying){
      vid.play().catch(()=>{}); // ignore
      isPlaying = true;
    } else {
      vid.pause();
      isPlaying = false;
    }
    updatePlayBtn();
  });

  // Reset button: go to 0 and play
  resetBtn.addEventListener('click', function(){
    // small timeout to ensure currentTime apply cross-browsers
    try {
      vid.currentTime = 0;
    } catch(e){
      // some browsers require play before setting currentTime
      vid.pause();
    }
    // ensure play after reset
    vid.play().catch(()=>{});
    isPlaying = true;
    updatePlayBtn();
  });

  // Speed slider
  speedRange.addEventListener('input', function(){
    const v = parseFloat(this.value);
    vid.playbackRate = v;
    speedVal.textContent = v.toFixed(2);
  });

  // Try autoplay on load
  window.addEventListener('load', tryAutoPlay);

  // Improve seamless loop: when close to end, jump slightly to start
  // (helps reduce the small 'black/stall frame' gap on some encodings/hosts)
  // Tweak threshold if needed.
  function seamlessCheck(){
    if (!isFinite(vid.duration) || vid.duration === 0) return;
    const remaining = vid.duration - vid.currentTime;
    if (remaining > 0 && remaining < 0.12) {
      // tiny jump to avoid gap (set to small positive so not 0)
      vid.currentTime = 0.04;
      // ensure playing
      if (vid.paused && isPlaying) vid.play().catch(()=>{});
    }
  }
  vid.addEventListener('timeupdate', seamlessCheck);

  // If video ends unexpectedly on some browsers, ensure restarted
  vid.addEventListener('ended', () => {
    // try to immediately play again
    vid.currentTime = 0.04;
    vid.play().catch(()=>{});
  });

  // Accessibility: keyboard control (space toggles)
  window.addEventListener('keydown', function(e){
    if (e.code === 'Space') {
      e.preventDefault();
      playPauseBtn.click();
    }
  });

  // In case the video metadata not ready, attempt small retries
  vid.addEventListener('loadedmetadata', function(){
    // if it was supposed to be playing, keep playing
    if (isPlaying) vid.play().catch(()=>{});
  });

})();
</script>
</body>
</html>
